<app-header></app-header>

<div id="main-content">

<!-- Header  -->

<div class="main-content-header row">
  <div class="col-lg-6 d-flex flex-row justify-content-start">
    <div>
      <div>
        <a [routerLink]="['/cesions-credito']"><span>Cesiones de crédito</span></a>
        <span class="mx-2">/</span>
        <span *ngIf="cesion">{{ cesion.title }}</span>
      </div>
      <h1 class="main-content-title"><span *ngIf="cesion">{{ cesion.title }} - </span>Usuarios</h1>
    </div>
  </div>
  <div class="col-lg-6 d-flex flex-row justify-content-end">
    <button *ngIf="cesion && cesion.auction_status_id != 2"
      class="btn-table btn-navy mr-2"
      title="Ver vista pública"
      (click)="gotoPublic()">
      <i class="fa fa-external-link-alt"></i>
    </button>
    <button class="btn-table btn-navy"
      title="Refrescar estado de la cesion de crédito"
      (click)="getAuction()">
      <i class="fa fa-history"></i>
    </button>
    <div *ngIf="cesion" style="font-size:.8rem">
      <div>
        <span class="text-black mr-2">Fecha de creación:</span>
        <span>{{ createdAt }}</span>
      </div>
      <div [ngClass]="cesionStatusColor">
        <i class="fa fa-circle small mr-2"></i>
        <span>{{ cesionStatus }}</span>
      </div>
    </div>
  </div>
</div>

<!-- Direct accesses -->

<div class="tab-box">
  <a [routerLink]="['/cesions-credito', cesionId, 'edit']" class="tab-button">Datos</a>
  <div class="tab-button active">Usuarios</div>
</div>

<!-- Users table -->

<div class="container-fluid mb-3">
  <div class="block-content">
    <div class="table-responsive">
      <table id="cesion-credito-usuarios" class="table" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
        <thead></thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</div>
</div>

<!-- Offer validation modal -->

<ng-template #confirmValidateModal>
  <div class="modal-header">
    <h5 class="modal-title text-black">Validar Oferta</h5>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"
      (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div class="modal-body text-darkgray">
    <p>¿Qué desea hacer con esta oferta?</p>
  </div>

  <div class="modal-footer">
    <button type="button" class="btn btn-rounded btn-border-gray" data-dismiss="modal"
      (click)="modalRef.hide()">Cancelar</button>
    <button type="button" class="btn btn-rounded btn-red"
      (click)="validateOffer(2)">Rechazar</button>
    <button type="button" class="btn btn-rounded btn-green"
      (click)="validateOffer(1)">Aceptar</button>
  </div>
</ng-template>
