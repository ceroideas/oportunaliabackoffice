<app-header></app-header>

<div id="main-content">
	<div class="container-fluid">

		<!-- Header  -->

		<div class="block-header">
			<div class="row clearfix">
				<div class="col-xl-6 col-md-5 col-sm-12 d-flex flex-row">
					<i class="block-header-icon fa fa-users text-navy mr-2"></i>
					<div>
						<h1>Cesiones de crédito</h1>
						<span>Gestion de cesiones de crédito</span>
					</div>
				</div>
				<div class="col-xl-6 col-md-5 col-sm-12">
					<button [routerLink]="['/cesions-credito/create']" class="btn btn-cyan btn-rounded float-right">
						<i class="fa fa-plus mr-2"></i>
						<span>Nueva Cesión de crédito</span>
					</button>
				</div>
			</div>
		</div>

		<!-- Exports -->

		<div class="block-exports">
			<button (click)="download('xlsx')" class="btn btn-border-navy btn-rounded mr-3" title="Exportar cesiones en Excel">
				<i class="fa fa-file-excel mr-2"></i>
				<span>XLSX</span>
			</button>
      		<button (click)="download('offerscesions')" class="btn btn-border-navy btn-rounded mr-3" title="Exportar ofertas en Excel">
				<i class="fa fa-file-excel mr-2"></i>
				<span>Ofertas XLSX</span>
			</button>

			<div>
				<form id="fileUploadForm" (ngSubmit)="onSubmit()" #fileUploadForm="ngForm">
				    <input type="file" id="fileInput" (change)="onFileSelected($event)" hidden>
				    <label for="fileInput" class="btn btn-border-navy btn-rounded mr-3" style="margin: 0;">Importar cesiones de crédito</label>
				    <!-- <button type="submit" hidden>Upload</button> -->
				</form>
			</div>
		</div>

    <!--<div class="block-exports">
			<button (click)="download('offerscesions')" class="btn btn-border-navy btn-rounded mr-3" title="Exportar ofertas en Excel">
				<i class="fa fa-file-excel mr-2"></i>
				<span>Ofertas XLSX</span>
			</button>
		</div>-->


		<!-- DataTable -->

		<div class="block-content">
			<div class="table-responsive">
				<table id="cesiones-credito" class="table" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
					<thead></thead>
					<tbody></tbody>
				</table>
			</div>
		</div>
	</div>
</div>

<!-- Auction history modal -->

<ng-template #historyModal>
	<app-cesion-credito-history [cesionId]="cesionId" (close)="modalRef.hide()">
	</app-cesion-credito-history>
</ng-template>

<!-- Delete confirmation modal -->

<ng-template #confirmModal>
	<div class="modal-header">
		<h5 class="modal-title text-black">Eliminar Cesión de crédito</h5>
		<button type="button" class="close" data-dismiss="modal" aria-label="Close"
				(click)="modalRef.hide()">
		  <span aria-hidden="true">&times;</span>
		</button>
	</div>

	<div class="modal-body text-darkgray">
		<p>¿Está seguro de querer eliminar permanentemente esta cesión de crédito?</p>
	</div>

	<div class="modal-footer">
		<button type="button" class="btn btn-rounded btn-border-gray" data-dismiss="modal"
			(click)="modalRef.hide()">Cancelar</button>
		<button type="button" class="btn btn-rounded btn-red"
			(click)="deleteCesion()">Eliminar</button>
	</div>
</ng-template>

<ng-template #importModal>
	<div class="modal-header">
		<h5 class="modal-title text-black">Importar Cesiones de crédito</h5>
		<button type="button" class="close" data-dismiss="modal" aria-label="Close"
				(click)="modalRef.hide()">
		  <span aria-hidden="true">&times;</span>
		</button>
	</div>

	<div class="modal-body text-darkgray">
		<p>El documento se ha cargado correctamente y se han importado las Cesiones de remate correctamente.</p>
	</div>

	<div class="modal-footer">
		<button type="button" class="btn btn-rounded btn-border-gray" data-dismiss="modal"
			(click)="modalRef.hide()">Aceptar</button>
		<!-- <button type="button" class="btn btn-rounded btn-cyan"
			(click)="importCesions()">Importar</button> -->
	</div>
</ng-template>

<ng-template #errorImportModal>
	<div class="modal-header">
		<h5 class="modal-title text-black">Importación de activos</h5>
		<button type="button" class="close" data-dismiss="modal" aria-label="Close"
				(click)="modalRef.hide()">
		  <span aria-hidden="true">&times;</span>
		</button>
	</div>

	<div class="modal-body text-danger">
		<p>Ha ocurrido un error al importar las cesiones de remate, vuelva a intentarlo.</p>
	</div>

	<div class="modal-footer">
		<button type="button" class="btn btn-rounded btn-border-gray" data-dismiss="modal"
			(click)="modalRef.hide()">Aceptar</button>
	</div>
</ng-template>