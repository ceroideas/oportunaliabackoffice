<app-header></app-header>

<div id="main-content">

	<!-- Header  -->

	<div class="main-content-header">
		<div>
			<a [routerLink]="['/membresia']">
				<span>Membresía</span>
			</a>
			<span class="mx-2">/</span>
			<span>Nueva</span>
		</div>
		<h1 class="main-content-title">Nueva Membresía</h1>
	</div>

	<!-- Form -->

	<div class="container-fluid">
		<div class="block-content">
			<form [formGroup]="form" *ngIf="form" autocomplete="false">
				<div class="row">
					<div class="form-group c_form_group mb-3 col-lg-12">
						<label>Nota *</label>
						<div class="input-group">
							<input type="text" class="form-control"
								formControlName="note"
								[ngClass]="{ 'invalid': errors('note') }"
								placeholder="Nota de la membresía">
						</div>
						<div class="form-errors">
							<div *ngIf="errors('note', 'required')">Requerido</div>
						</div>
					</div>
				</div>

				<div class="row">
					<div class="form-group c_form_group mb-3 col-lg-6">
						<label>Buscar usuario</label>
						<div class="input-group">
							<input type="text" class="form-control"
							[ngModel]="searchUser"
							[ngModelOptions]="{standalone: true}"
							(ngModelChange)="userSearch()"
							id="users_search"
							placeholder="Buscar usuarios...">
						</div>
					</div>
					<div class="form-group c_form_group mb-3 col-lg-6">
						<label>Usuario *</label>
						<div class="input-group">
							<select class="form-control" [ngClass]="{ 'invalid': errors('user_id') }" id="users_select" formControlName="user_id">
								<option *ngFor="let category of categories" value="{{ category.id }}">
									{{ category.name }}
								</option>
							</select>
						</div>
						<div class="form-errors">
							<div *ngIf="errors('user_id', 'required')">Requerido</div>
						</div>
					</div>
				</div>
				
				<div class="row">
					<div class="form-group c_form_group mb-3 col-lg-6">
						<label>Buscar subasta</label>
						<div class="input-group">
							<input type="text" class="form-control"
							[ngModel]="searchAuction"
							[ngModelOptions]="{standalone: true}"
							(ngModelChange)="auctionSearch()"
							id="auctions_search"
							placeholder="Buscar subasta...">
						</div>
					</div>
					<div class="form-group c_form_group mb-3 col-lg-6">
						<label>Subasta *</label>
						<div class="input-group">
							<select class="form-control" [ngClass]="{ 'invalid': errors('auction_id') }" id="auctions_select" formControlName="auction_id">
								<option *ngFor="let auction from auctions">{{auction.title}}</option>
							</select>
						</div>
						<div class="form-errors">
							<div *ngIf="errors('auction_id', 'required')">Requerido</div>
						</div>
					</div>
				</div>

			</form>
		</div>

		<div class="block-footer">

			<div class="row">
				<div class="col-lg-12 d-flex flex-row justify-content-end align-items-center">
					<button type="button" class="btn btn-submit btn-rounded btn-border-cyan mr-3"
						[routerLink]="['/membresia']">Cancelar</button>
					<button type="button" class="btn btn-submit btn-rounded btn-cyan"
						(click)="saveMembresia()">Guardar</button>
				</div>
			</div>
		</div>
	</div>
</div>
